# Matrix Computation with OpenMP

### –°—Ç—É–¥–µ–Ω—Ç
- –ò–º—è: Bassel Alshayeb - –ë–∞—Å–µ–ª—å –ê–ª—å—à–∞–µ–±
- ST: st123219

### Task

d = <B4 x, y>/<x, y> - <B3 x, y>/<x, y>
```
–ó–∞–¥–∞–Ω–∏–µ A-07 (–ë–∞—Å–µ–ª—å –ê–ª—å—à–∞–µ–±)
–ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤—ã—Ä–∞–∂–µ–Ω–∏—è:
d = <B4 x, y>/<x, y> - <B3 x, y>/<x, y>,
–≥–¥–µ B ‚Äì –∫–≤–∞–¥—Ä–∞—Ç–Ω–∞—è –ø–ª–æ—Ç–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞, —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ—Ç–æ—Ä–æ–π –∏–º–µ—é—Ç —Ç–∏–ø double, —ç–ª–µ–º–µ–Ω—Ç—ã –º–∞—Ç—Ä–∏—Ü—ã
–∑–∞–¥–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –ø—Å–µ–≤–¥–æ—Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª, x –∏ y ‚Äì –≤–µ–∫—Ç–æ—Ä—ã (—ç–ª–µ–º–µ–Ω—Ç—ã –∑–∞–¥–∞—é—Ç—Å—è
–ø—Å–µ–≤–¥–æ—Å–ª—É—á–∞–π–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏), <,> - —Å–∫–∞–ª—è—Ä–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ.
–†–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç—å —ç—Ç—É –ø—Ä–æ–≥—Ä–∞–º–º—É —Å –ø–æ–º–æ—â—å—é OpenMP (parallel, task).
–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –æ—Ç –µ–µ
–≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–π —Ç—Ä—É–¥–æ–µ–º–∫–æ—Å—Ç–∏ (—Ä–∞–∑–º–µ—Ä–∞ –º–∞—Ç—Ä–∏—Ü).
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏.
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–∫–æ–Ω–∞ –ê–º–¥–∞–ª–∞. –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —É—Å–∫–æ—Ä–µ–Ω–∏–µ:—á–∏—Å–ª–æ –ø–æ—Ç–æ–∫–æ–≤ –¥–ª—è –∑–∞–¥–∞–Ω–Ω–æ–≥–æ
–ø—Ä–∏–º–µ—Ä–∞.
–°—Ä–æ–∫ —Å–¥–∞—á–∏ –æ—Ç—á–µ—Ç–∞ 26.11.2024.

```
#### –û–±—ä—è—Å–Ω–µ–Ω–∏–µ

–î–ª—è –∞–Ω–∞–ª–∏–∑–∞:
- B ‚Äî –∫–≤–∞–¥—Ä–∞—Ç–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞.
- X –∏ Y ‚Äî –≤–µ–∫—Ç–æ—Ä—ã.
- <.,.> 
- –†–∞–∑–º–µ—Ä –º–∞—Ç—Ä–∏—Ü—ã `1000` (–¥–ª—è —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è).

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–∫ **–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ** –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, —Ç–∞–∫ –∏ **–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º OpenMP. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–∞–π–ª–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.

---

### –†–µ—à–µ–Ω–∏–µ
**1. –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã**

```
Operating System: Ubuntu 22.04.4 LTS
Kernel: 5.15.0-122-generic
Processer: Intel(R) Xeon(R) E-2136 CPU @ 3.30GHz 
Cores: 12
Architecture: x86_64
Memory: 62 G
Disk Space: 6.3 G
```

**2. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑–º–µ—Ä–µ–Ω–∏–π**

- –†–∞–∑–º–µ—Ä –º–∞—Ç—Ä–∏—Ü—ã: 1000
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 36.2499 Seconds
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 

| Threads | Execution Time | Speedup |
| ------- | -------------- | ------- |
| 1 | 36.2499 | 1.0 |
| 2 | 21.1306 | 2.002872611284109 |
| 4 | 10.5706 | 4.003736779369193 |
| 8 | 7.03364 | 6.017069397921986 |
| 16 | 4.51372 | 9.376279432485843 |
| 32 | 4.09819 | 10.326973615181336 |
---


**3. Python Output**

![python result](console_result_python.png)

**4. Speedup Diagram As Amdahl's Law**

![Amdahl's Comparison](speedup_vs_threads.png)


**5. Execution Manager**

![Execution Time VS Threads](execution_time_vs_threads.png)


### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–≤–æ–¥–∞ –º–∞—Ç—Ä–∏—Ü—ã –∏ –≤–µ–∫—Ç–æ—Ä–æ–≤ –∏–∑ —Ñ–∞–π–ª–æ–≤ –∏–ª–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –¥–ª—è —É–º–Ω–æ–∂–µ–Ω–∏—è –º–∞—Ç—Ä–∏—Ü –∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å–∫–∞–ª—è—Ä–Ω—ã—Ö –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º OpenMP.
- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.

---

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **C++ Compiler with OpenMP Support** 
- **Python 3.10**

---

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

**1. Compilation** \

–ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π OpenMP main.cpp:

```bash
g++ -o main -fopenmp  main.cpp
```

**2. Execution** \

- –î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Python —Å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ—Ç–æ–∫–æ–≤

```
[1, 2, 4, 8, 16, 32]
```

- –ó–∞–ø—É—Å—Ç–∏—Ç–µ Python-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∏–∞–≥—Ä–∞–º–º –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```bash
python3 analyzer.py
```
- –õ–∏–±–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É –≤—Ä—É—á–Ω—É—é, —É–∫–∞–∑–∞–≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤

```bash
export OMP_NUM_THREADS=X
./main
```

**3. Debugging** \

To run sequentialy and check the speed for:
```bash
export OMP_NUM_THREADS=1 
./main
```

---


### –í—ã–≤–æ–¥
1. C++:
- –ü–µ—á–∞—Ç–∞–µ—Ç –≤—ã—á–∏—Å–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ùëë.
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

2. Python
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ—Ç–æ–∫–æ–≤.
- –°—Ç—Ä–æ–∏—Ç –¥–∏–∞–≥—Ä–∞–º–º—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å–∫–æ—Ä–µ–Ω–∏—è –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ—Ç–æ–∫–æ–≤.

